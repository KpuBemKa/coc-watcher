# CoC Battler

Скрипт для поиска битв с нужным ТХ

# Предварительные проверки
- Скрипт работает с мониторами с разрешением 16:9. На других, скорее всего, работать без имзенений не будет.
- Не использовать HDR в настройках Windows. Это ощутимо меняет цвета в игре, что путает скрипт.

# Как установить и запустить на Windows 
# Подготовка к установке
- Проверить наличие Git'a:
    - Открыть программу Terminal (должна быть встроенна в последние версии винды) или обычную командную строку (показывается в поиске винды при вводе `cmd`);
    - Прописать команду `git --help`;
    - Если выводит помощь, а не что-то вроде "команда не найдена", то всё хорошо, и можно переходить к следующему пункту. Если жалуется, что такой команды нет, то пора ставить Git:
        - Скачать установщик для винды с сайта: https://git-scm.com/downloads;
        - Запустить его и установить Git. Настройки можно оставить стандартными, если непонятно что они означают;
        - Открыть НОВЫЙ (обязятельно) терминал, и еще раз прописать команду `git --help`;
        - Если выводит помощь, то он установился. Если выводит, что команда не обнаружена, то надо добавить Git в переменную среду PATH:
            - Расписывать очень долго, так что вот статья с путеводителем: https://remontka.pro/add-to-path-variable-windows/;
            - Добавить в PATH нужно путь к папке, где находится .exe-шка. Путь к ней зависит от пути, куда был утсновлен Гит. У меня, например, путь, добавленный в переменную среду PATH выглядит так: `C:\Users\Admin\dev\tools\Git\bin`;
            - Еще раз проверить наличие Git'a командой `git --help`. Если и на этот раз не помогло, то гг. Тут только гугл или мой дискорд;
- Проверить наличие Python'a:
    - Открыть терминал (смотреть выше о там как открыть);
    - Прописать команду `python --version`;
    - Если выводит что-то вроде `Python 3.10.9`, то все хорошо, и можно переходить к следующему пункту. Если выводит, что команда не найдена, пора ставить Питон:
        - Перейти по ссылке: https://www.python.org/downloads/, и скачать установщик;
        - Запустить установку, ОБЯЗАТЕЛЬНО не забыв предварительно поставить галочку добавления в PATH, а то придется ставить самому;
        - Запустить новый (обязательно новый) терминал, и еще раз проверить установку командой `python --version`. Если все равно не работает, тут поможет только гугл или мой дискорд;
- Проверить наличие pip'a:  
    - Прописать в терминале команду `pip --version`. Если выводится версия по типу `pip 22.3.1 from *** (python 3.10)`, то все хорошо. Если нет, пора ставить `pip`:
        - Расписывать долго, вот туториал: https://pythonru.com/baza-znanij/ustanovka-pip-dlja-python-i-bazovye-komandy  
  
# Установка
- Открыть терминал в папке, где будет хранится проект. Есть два способа:
    - Зайти в нужную папку в Проводнике, нажать ПКМ по пустому месту и выбрать пункт "Открыть в Терминале". Если такого пункта нет, то есть пункт №2;
    - Открыть терминал, и командами перейти в нужную папку:
        - Перейти на диск, на котором хранится проект. Если он, например, на диске D, просто прописать команду `D:`, если на диске E, то `E:`. Терминал по дефолту открывается на диске С, так что если проект на нем, то ничё прописывать не надо;
        - Прописать команду `cd <путь к папке>`, где `<путь к папке>` - это путь к папке. В конце команда должна выглядеть как-то так: `cd C:\Users\Admin\dev\projects\coc-watcher`;
- В этом же терминале прописать команды `git clone https://github.com/KpuBemKa/coc-watcher` и `cd .\coc-watcher\`;
- Создать виртуальную среду командой `python -m venv venv`
- Активировать виртуальную среду командой `.\venv\Scripts\activate`. В начале строки теперь должно появится `(venv)`
- Прописать команду `pip install -r .\requirements.txt`. Это установит все необходимые библиотеки;
- Готово. Скрипт готов к запуску.

# Запуск
- Зайти в терминале в папку проекта (смотреть выше как это сделать)
- Активировать виртуальную среду командой `.\venv\Scripts\activate`. В начале строки теперь должно появится `(venv)`
- Команда для запуска выглядит так: `python .\main.py -t <перебор уровней ТХ через ',' без пробела>`. Например: `python .\main.py -t 10,11,12,13`
- Если всё окей, скрипт выведет на экран что-то типа `Searching for the next THs: 1; 2; 3;` и `Ready to search for a battle`


# Как использовать автономный скрипт
1. Запустить Clash of Clans.
2. Включить настройках Clash-a темные облака. Светлые я еще не сделал.
3. Включить полноэкранный режим
4. Нажать горячую клавижу запуска (F6)

## Горячие клавишы скрипта  
- **F6**: запустить поиск;  
- **F7**: остановить поиск;  
- **F9**: принудительное завершение программы;
